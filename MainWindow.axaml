<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:controls="clr-namespace:ZapEditor.Controls"
        xmlns:viewModels="clr-namespace:ZapEditor.ViewModels"
        mc:Ignorable="d" d:DesignWidth="1200" d:DesignHeight="800"
        x:Class="ZapEditor.MainWindow"
        x:DataType="viewModels:MainWindowViewModel"
        Title="ZapEditor - 多言語対応テキストエディタ">

    <Window.Resources>
        <controls:WritingModeConverter x:Key="WritingModeConverter" />
    </Window.Resources>

    <Grid RowDefinitions="Auto, *" ColumnDefinitions="200, *">

        <!-- メニューバー -->
        <Menu Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2">
            <MenuItem Header="ファイル(_F)">
                <MenuItem Header="新規作成(_N)" Command="{Binding NewFileCommand}" />
                <MenuItem Header="開く(_O)" Command="{Binding OpenFileCommand}" />
                <MenuItem Header="保存(_S)" Command="{Binding SaveFileCommand}" />
                <MenuItem Header="名前を付けて保存(_A)" Command="{Binding SaveAsFileCommand}" />
                <Separator />
                <MenuItem Header="終了(_X)" Command="{Binding ExitCommand}" />
            </MenuItem>
            <MenuItem Header="編集(_E)">
                <MenuItem Header="元に戻す(_U)" Command="{Binding UndoCommand}" />
                <MenuItem Header="やり直し(_R)" Command="{Binding RedoCommand}" />
                <Separator />
                <MenuItem Header="切り取り(_T)" Command="{Binding CutCommand}" />
                <MenuItem Header="コピー(_C)" Command="{Binding CopyCommand}" />
                <MenuItem Header="貼り付け(_P)" Command="{Binding PasteCommand}" />
                <MenuItem Header="削除(_D)" Command="{Binding DeleteCommand}" />
                <Separator />
                <MenuItem Header="すべて選択(_A)" Command="{Binding SelectAllCommand}" />
            </MenuItem>
            <MenuItem Header="表示(_V)">
                <MenuItem Header="言語切替(_L)">
                    <MenuItem Header="日本語" Command="{Binding SetLanguageCommand}" CommandParameter="ja" />
                    <MenuItem Header="English" Command="{Binding SetLanguageCommand}" CommandParameter="en" />
                    <MenuItem Header="中文" Command="{Binding SetLanguageCommand}" CommandParameter="zh" />
                </MenuItem>
                <Separator />
                <MenuItem Header="縦書き/横書き切替(_W)" Command="{Binding ToggleWritingModeCommand}" />
            </MenuItem>
            <MenuItem Header="実行(_R)">
                <MenuItem Header="コードを実行(_X)" Command="{Binding RunCodeCommand}" />
                <MenuItem Header="デバッグ(_D)" Command="{Binding DebugCodeCommand}" />
            </MenuItem>
        </Menu>

        <!-- サイドバー -->
        <DockPanel Grid.Row="1" Grid.Column="0" Background="#F0F0F0">
            <TextBlock Text="ファイルツリー" DockPanel.Dock="Top" Margin="5" FontWeight="Bold" />
            <TreeView Name="FileTree" Margin="5">
                <TreeViewItem Header="プロジェクト" IsExpanded="True">
                    <TreeViewItem Header="ソースコード" />
                    <TreeViewItem Header="リソース" />
                    <TreeViewItem Header="ドキュメント" />
                </TreeViewItem>
            </TreeView>
        </DockPanel>

        <!-- メインエディタエリア -->
        <Grid Grid.Row="1" Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- ツールバー -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" Background="#E0E0E0" Margin="2">
                <Button Content="新規" Command="{Binding NewFileCommand}" Margin="2" Width="60" />
                <Button Content="開く" Command="{Binding OpenFileCommand}" Margin="2" Width="60" />
                <Button Content="保存" Command="{Binding SaveFileCommand}" Margin="2" Width="60" />
                <Separator Margin="5" />
                <Button Content="実行" Command="{Binding RunCodeCommand}" Margin="2" Width="60" />
                <Button Content="デバッグ" Command="{Binding DebugCodeCommand}" Margin="2" Width="60" />
                <Separator Margin="5" />
                <Button Command="{Binding ToggleWritingModeCommand}" Margin="2" Width="80">
                    <Button.Content>
                        <TextBlock Text="{Binding IsVerticalWritingMode, Converter={StaticResource WritingModeConverter}}" />
                    </Button.Content>
                </Button>
                <Separator Margin="5" />
                <ComboBox Name="LanguageSelector" Width="120" Margin="2"
                          ItemsSource="{Binding AvailableLanguages}"
                          SelectedItem="{Binding CurrentLanguage}" />
            </StackPanel>

            <!-- テキストエディタ -->
            <controls:SyntaxHighlightEditor Grid.Row="1" Name="Editor" />

            <!-- ステータスバー -->
            <Border Grid.Row="2" Background="#f5f5f5" Padding="6">
                <StackPanel Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
                    <TextBlock Text="{Binding StatusBarText}" />
                    <TextBlock Text="|" />
                    <TextBlock Text="{Binding CurrentLanguage}" />
                    <TextBlock Text="|" />
                    <TextBlock Text="{Binding CurrentFileName}" />
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>
